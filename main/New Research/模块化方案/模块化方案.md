## 模块化方案
### 一、子工程模板

##### Ⅰ 子工程
1. 创建子工程模板，命名为命名为`IOSMatrix.xcodeproj`。

	> 1. 工程内部添加通用的文件组（见`三、Ⅱ 子工程框架`）
	> 2. 添加通用Target Aggregate，命名为`IOSMatrixAgg`。
		并添加复制脚本。
	
	
### 二、 主工程

##### Ⅰ 设置
1. 创建新工程，如命名为`MainMatrix.xcodeproj`

	> 1. Pods配置文件初始化。
	> 3. 创建`APPFks`文件夹，涵盖子工程复制脚本添加进来的静态库，供主工程使用。
	> 4. 创建`Resources`文件夹，涵盖自子工程复制添加进来的静bundle资源文件（脚本未支持，需手动链接：不需复制，资源文件仍在子工程静态库中），供主工程使用。也涵盖主工程的资源文件。
	> 5. 将子工程模块置入``MainMatrix.xcodeproj``中，并在主工程目录中引入脚本`createapp.sh`。
	> 2. 工程目录设计（见`三、Ⅰ 主工程框架`）。
		
2. 依据子工程模板+脚本，生成具体子工程，并引入主工程（**.xcworkspace)。

	> 1. 在终端键入`sh createapp.sh **name`即可生成子工程。
	> 2. 拖动子工程`**name.xcodeproj`到`**.xcworkspace`中。
	> 3. 子工程同名头文件手动更改内容。
	
3. 编译子工程

	> 1. 在`Target-Build Phases`中，将其中需要暴露的文件置入`Public`选项下。
	> 2. 选择Scheme：子项目-Generic iOS Device，`⌘+B`执行编译，得到framework库。
	> 3. 选择Scheme：子项目Target-Generic iOS Device，`⌘+B`执行编译，得到Apps-framework库。（首次生成，需手工导入工程中）
	> 4. bundle文件需copy至framwork中(若有)，主工程链接即可。 资源文件仍在子工程静态库中。
	>
	> 附. **子工程目前要求支持armv7 arm64，可使用
	`lipo -info **.framework`检测**
	
##### Ⅱ 开发

1. 子工程的开发可以在主项目中开发，也可自己做测试平台单独开发。
	
### 三、主工程、子工程框架
#### Ⅰ 主工程框架

1. Pods包管理
2. 创建`APPFks`文件夹，导入子工程静态库
3. `Resources`文件夹创建，自身资源文件、子工程资源文件外链
4. 创建`Libs`文件夹，放置二方库、不受Pods管理的三方库。
5. PCH文件创建

**主工程：属于子工程的调度中心，除了一些必要的初始化工作，应不直接参与各种业务、功能的处理**

#### Ⅱ 子工程框架

0. 与工程同名的h头文件，需要修改宏定义设置。

	> 若不添加该文件，会出现警告`no umbrella header`,故添加之，若使用，需要取消注释。
	
1. 系统库、二方库、三方库添加

	> 1. 系统库：直接添加至`Build Phases`
	> 2. 二方库：置入Libs-2nd文件夹
	> 3. 三方库置入Libs-3rd或者在主工程中使用Pods管理
	> 4. 附：若子工程需要使用pod对应的库，需在target-build settings中设置Header Search Pths：../Pods/Headers/Public（recursive）即可。
	>
	> 	在Frame search Paths下置../Apps(non-)、../Pods(recu)
	
2. pch文件设置

	> 1. 进入Target->Build Settings，设置Precompile Prefix Header：YES；设置Prefix Header：$(SRCROOT)/$(PROJECT)/$(PROJECT)-Prefix.pch即可。
3. Bundle（可选）：资源文件

	> 放置图片、音频等多媒体文件
	> 注：若图片资源不在子工程之外使用，建议使用imgsets工具

4. Utils：辅助功能类

	> 诸如类别、Helper、Builder等
	
5. Cpts：组件

	> UIs:UI组件
	>
	> Funcs:功能组件

6. Modules：模块

	> 1. 子工程中可以拆为Modules的功能，置于此处。分功能和业务模块。
	> 2. 若在其它子工程中有通用模块，则可以置于通用子工程中。
7. Biz：业务

	> MVIP设计模式开发（测试）

### 四、脚本（需细化）


## TODO:

1. 发布环境更改时，注意测试子工程库文件是否是arm架构。